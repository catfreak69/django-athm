<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Getting Started - Django ATHM</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Django ATHM</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Getting Started</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#installation">Installation</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="https://github.com/django-athm/django-athm/blob/master/CHANGELOG.md">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="config/">Configuration</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Django ATHM</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installation">Installation</h1>
<ol>
<li>Install the package from PyPI.</li>
</ol>
<pre><code class="bash">pip install django-athm
</code></pre>

<ol>
<li>Add the package to your <code>INSTALLED_APPS</code> and configure the needed settings in your <code>settings.py</code>.</li>
</ol>
<pre><code class="python">INSTALLED_APPS = [
    ...,
    &quot;django_athm&quot;,
]

DJANGO_ATHM_PUBLIC_TOKEN = 'your-public-token'
DJANGO_ATHM_PRIVATE_TOKEN = 'your-private-token'
</code></pre>

<ol>
<li><em>(Optional)</em> Create the model tables for storing ATH Móvil transactions and items.</li>
</ol>
<pre><code class="bash">python manage.py migrate
</code></pre>

<ol>
<li>Add the default callback function to your root urls (custom callback support coming soon):</li>
</ol>
<pre><code class="python">    urlpatterns = [
        ...,
        path(&quot;athm/&quot;, include(&quot;django_athm.urls&quot;, namespace=&quot;django_athm&quot;)),
    ]
</code></pre>

<ol>
<li>In your views, pass a <code>ATHM_CONFIG</code> (or whichever key you prefer) to the context:</li>
</ol>
<pre><code class="python">def your_view(request):
    context = {
        &quot;ATHM_CONFIG&quot;: {
            &quot;total&quot;: 25.0,
            &quot;subtotal&quot;: 24.0,
            &quot;tax&quot;: 1.0,
            &quot;items&quot;: [
                {
                    &quot;name&quot;: &quot;First Item&quot;,
                    &quot;description&quot;: &quot;This is a description.&quot;,
                    &quot;quantity&quot;: &quot;1&quot;,
                    &quot;price&quot;: &quot;24.00&quot;,
                    &quot;tax&quot;: &quot;1.00&quot;,
                    &quot;metadata&quot;: &quot;metadata test&quot;
                }
            ]
        }
    }

    return render(request, &quot;your-template.html&quot;, context=context)
</code></pre>

<ol>
<li>In the related templates where you wish to display the Checkout button, load and invoke the <code>athm_button</code> custom tag along with your ATHM config from the previous step.</li>
</ol>
<pre><code class="html">{% load django_athm %}

{% athm_button ATHM_CONFIG %}
</code></pre>

<p><strong>NOTE</strong>: You must have jQuery loaded in your Django template BEFORE you use the <code>athm_button</code> tag.</p>
<p>You can use the following snippet, placing it somewhere above the <code>athm_button</code> tag:</p>
<pre><code class="html">&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>Also, make sure that the CSRF token tag is available in your template. You may need to decorate your views with <code>@requires_csrf_token</code>.</p>
<ol>
<li>
<p>The user clicks on button rendered by your template and then uses the ATH Móvil app to pay the business associated to the public and private tokens you set up in <code>settings.py</code>.</p>
</li>
<li>
<p>This package will perform a POST <code>ajax</code> request on success or failure to the callback view. By default, this will persist the transaction and items in your database.</p>
</li>
<li>
<p>You can obtain your transactions and items from the database:</p>
</li>
</ol>
<pre><code class="python">from django_athm.models import ATHM_Transaction, ATHM_Items

my_transactions = ATHM_Transaction.objects.all()
my_items = ATHM_Items.objects.all()
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config/" class="btn btn-neutral float-right" title="Configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="config/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2020-02-02 17:54:47
-->
